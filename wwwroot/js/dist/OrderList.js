(()=>{"use strict";var __webpack_modules__={222:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>LocalStrage});class LocalStrage{static set(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))}static get(objName){const obj=window.sessionStorage.getItem(objName);if(!this.check(objName))return!1;if(null===obj)throw new Error("未知のエラー");const parser=function(_k,v){return 0===v.toString().indexOf("function")?eval("("+v+")"):v};return JSON.parse(obj,parser)}static check(e){return!!window.sessionStorage.getItem(e)}static delete(){window.sessionStorage.clear()}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(e,t)=>{for(var s in t)__webpack_require__.o(t,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{class e{constructor(){this.setPadding=()=>{const e=document.querySelector(".navbar");let t=0;if(e){const s=document.querySelector(".navbar-sub");s&&(t=e.offsetHeight,s.style.top=t+"px"),document.body.style.paddingTop=e.offsetHeight+t+5+"px"}},this.setPadding(),window.addEventListener("resize",this.setPadding)}}class t{constructor(){this.Buck=()=>{document.getElementById("back").addEventListener("click",(()=>{history.back()}))}}}class s{constructor(){this.SetCounter=()=>{Array.from(document.getElementsByClassName("counter")).forEach((e=>{const t=e;if(!t)return;const s=t.querySelector(".counter_increment"),r=t.querySelector(".counter_decrement"),n=t.querySelector(".counter_number"),o=parseInt(t.max)||100,a=parseInt(t.min)||0;let c,i=1;function d(e){let t=parseInt(n.value)||0;t+=e,t=Math.max(a,Math.min(o,t)),n.value=String(t)}function u(e,t){e.addEventListener("mousedown",(function(){i=1,d(t),c=setTimeout((function e(){i=5,d(t*i),c=setTimeout(e,200)}),500)})),e.addEventListener("mouseup",(function(){clearTimeout(c)})),e.addEventListener("mouseleave",(function(){clearTimeout(c)})),e.addEventListener("touchend",(function(){clearTimeout(c)}))}u(s,1),u(r,-1)}))}}}var r,n=__webpack_require__(222);class o{constructor(){this.send=async(e,t,s,r,n="json",o=!0)=>{let c;c="GET"==t?new Request(e,{method:t,headers:s}):new Request(e,{method:t,headers:s,body:JSON.stringify(r)}),a.set();const i=await fetch(c).catch((e=>{throw e}));if(!i.ok)throw a.remove(),new Error(i.statusText);if(o)switch(n){case"json":return await this.fetchResonse(i.json()).catch((e=>{throw e}));case"text":return await this.fetchResonse(i.text()).catch((e=>{throw e}))}else a.remove()}}async fetchResonse(e){return await e.then((e=>e)).catch((e=>{throw console.log(e),e})).finally((()=>{a.remove()}))}}class a{}r=a,a.loadElement=document.getElementById("loading-overlay"),a.set=()=>{r.loadElement.classList.remove("nodisplay")},a.remove=()=>{r.loadElement.classList.add("nodisplay")};class c{constructor(){this.setFeeData=async(e,t)=>{let s={fee:e};return this.send(s).then((e=>{console.log(t),console.log(e),alert("支払いが完了しました")}))},this.send=async e=>{const t=new o;return await t.send(this.url,this.method,this.headers,e,this.responseKind).then((async e=>e)).catch((e=>{throw e}))},this.url="/Pos/PaymentComplete",this.method="POST",this.headers={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},this.responseKind="text"}}class i{constructor(e,t,s,r){this.ResultId=e,this.Category=t,this.OrderNumber=s,this.OrderFee=r}}class d{constructor(){this.setOrderList=()=>{const e=Array.from(document.getElementsByClassName("order"));let t=[];if(e.length>0){Array.from(document.getElementsByClassName("order")).forEach((e=>{t.push(new i(parseInt(e.dataset.result_id),parseInt(e.querySelector(".category")?.value??"0"),parseInt(e.querySelector(".order_number").value),parseInt(e.querySelector(".order_fee").value)))}));const e=t.map((e=>({ResultId:e.ResultId,Category:e.Category,OrderNumber:e.OrderNumber,OrderFee:e.OrderFee}))).filter((e=>0!=e.OrderNumber));this.send(e).then((e=>{const t=JSON.parse(e);"200"==t.status&&(n.c.delete(),document.getElementById("order_list").innerHTML="",document.getElementById("total_fee").innerText="0",document.getElementById("buttons-container").remove()),window.alert(t.message)}))}},this.send=async e=>{const t=new o;return await t.send(this.url,this.method,this.headers,e,this.responseKind).then((async e=>e)).catch((e=>{throw e}))},this.url="/Pos/SendOrder",this.method="POST",this.headers={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},this.responseKind="text"}}class u{constructor(){this.SetPaypalButton=e=>{0!==document.getElementsByClassName("paypal_button").length&&this.Create(e,"#paypal_button")},this.Create=(e,t)=>{paypal.Buttons({createOrder:(t,s)=>s.order.create({purchase_units:[{amount:{value:e}}]}),onApprove:(t,s)=>s.order.capture().then((t=>{const s=new c,r=new d;s.setFeeData(e,t),r.setOrderList()}))}).render(t)}}}class l{constructor(){this.setOrderList=()=>{const t=new s;let r=[];n.c.check("OrderEntityList")&&(r=n.c.get("OrderEntityList"));let o=0;this.send(r).then((s=>{document.getElementById("order_list").innerHTML=s,document.getElementById("total_fee").innerText=o.toString(),t.SetCounter(),new e})),r.forEach((e=>{o+=e.OrderFee})),(new u).SetPaypalButton(o)},this.send=async e=>{const t=new o;return await t.send(this.url,this.method,this.headers,e,this.responseKind).then((async e=>e)).catch((e=>{throw e}))},this.url="/Pos/OrderListContents",this.method="POST",this.headers={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},this.responseKind="text"}}(async()=>{new e;const s=new l,r=new t;s.setOrderList(),r.Buck()})()})()})();